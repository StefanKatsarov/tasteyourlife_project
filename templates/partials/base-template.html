{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Index</title>
    <link rel="stylesheet"
          href="{% static 'css/style_nav.css' %}">
    <script>
    // for getting the sorting status to be displayed in sorting dropdown placeholder
    function get(name) {
        if (name = (new RegExp('[?&]' + encodeURIComponent(name) + '=([^&]*)')).exec(location.search))  //location.search give query sling part
            return decodeURIComponent(name[1]);
    }

    if (get('ordering'))
        document.getElementById('placeholder').innerHTML = "Sort: " + document.getElementById(get('ordering')).innerHTML;

    if (get('price'))
        document.getElementById('filters-placeholder').innerHTML = "Filters: " + document.getElementById(get('filters')).innerHTML;


    // for getting url after applying ordering
    function finalurlsort() {
        var url = new URL(window.location.href);
        var search_params = url.searchParams;
        search_params.set('ordering', document.getElementById("sort-list").value);
        url.search = search_params.toString();
        var new_url = url.toString();
        return new_url
    }

    // for getting url after applying price filtering
    function finalurlcategory() {
        var url = new URL(window.location.href);
        var search_params = url.searchParams;
        search_params.set('category', document.getElementById("category-list").value);
        url.search = search_params.toString();
        var new_url = url.toString();
        return new_url
    }

    function finalurlsubcategory() {
        var url = new URL(window.location.href);
        var search_params = url.searchParams;
        search_params.set('subcategory', document.getElementById("subcategory-list").value);
        url.search = search_params.toString();
        var new_url = url.toString();
        return new_url
    }

    function finalurlcooking_method() {
        var url = new URL(window.location.href);
        var search_params = url.searchParams;
        search_params.set('cooking-method', document.getElementById("cooking-method-list").value);
        url.search = search_params.toString();
        var new_url = url.toString();
        return new_url
    }

    function finalurldifficulty() {
        var url = new URL(window.location.href);
        var search_params = url.searchParams;
        search_params.set('difficulty', document.getElementById("difficulty-list").value);
        url.search = search_params.toString();
        var new_url = url.toString();
        return new_url
    }
</script>
</head>
<body>
<header>
    {% include 'partials/nav-bar.html' %}
</header>

<main>
    {% block page_content %}
    {% endblock %}
</main>


<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
</body>
</html>